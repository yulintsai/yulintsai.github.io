<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.76.2" />

  <title>[Day 8] Oops！Gitea - 專案怎麼那麼肥！？ &middot; Rain Forest</title>

  <meta name="description" content="" />

  

<meta itemprop="name" content="[Day 8] Oops！Gitea - 專案怎麼那麼肥！？">
<meta itemprop="description" content="Oops 在跑CI/CD時，有遇過在 git clone step時非常之那麼久(超過1分鐘以上)！  先打開gitea進入此專案主頁 請大家注意到此專案的Size！">
<meta itemprop="datePublished" content="2020-09-16T09:43:32+00:00" />
<meta itemprop="dateModified" content="2020-09-16T09:43:32+00:00" />
<meta itemprop="wordCount" content="45">



<meta itemprop="keywords" content="gitea,.gitignore," />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Day 8] Oops！Gitea - 專案怎麼那麼肥！？"/>
<meta name="twitter:description" content="Oops 在跑CI/CD時，有遇過在 git clone step時非常之那麼久(超過1分鐘以上)！  先打開gitea進入此專案主頁 請大家注意到此專案的Size！"/>


<meta property="og:title" content="[Day 8] Oops！Gitea - 專案怎麼那麼肥！？" />
<meta property="og:description" content="Oops 在跑CI/CD時，有遇過在 git clone step時非常之那麼久(超過1分鐘以上)！  先打開gitea進入此專案主頁 請大家注意到此專案的Size！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yulintsai.github.io/post/day-8/" />
<meta property="article:published_time" content="2020-09-16T09:43:32+00:00" />
<meta property="article:modified_time" content="2020-09-16T09:43:32+00:00" />



  <link type="text/css"
        rel="stylesheet"
        href="/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="/css/hyde.css">

  
<style type="text/css">
  .sidebar {
    background-color: #3f83b3;
  }

  .read-more-link a {
    border-color: #3f83b3;
  }

  .pagination li a {
    color: #3f83b3;
    border: 1px solid #3f83b3;
  }

  .pagination li.active a {
    background-color: #3f83b3;
  }

  .pagination li a:hover {
    background-color: #3f83b3;
    opacity: 0.75;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #3f83b3;
  }
</style>



  

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <img src="/images/mylogo.jpg" class="img-circle img-headshot center" alt="Profile Picture">
        </div>
        
      

      <h1>Rain Forest</h1>

      
      <p class="lead">Notes</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://yulintsai.github.io/">Home</a>
        </li>
        <li>
          <a href="/post/">Posts</a>
        </li><li>
          <a href="/about/">About</a>
        </li><li>
          <a href="/tags/">Tags</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://github.com/yulintsai" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1>[Day 8] Oops！Gitea - 專案怎麼那麼肥！？</h1>

  <div class="post-date">
    <time datetime="2020-09-16T09:43:32Z">Sep 16, 2020</time> &middot; 1 min read
  </div>

  <h3 id="oops-在跑cicd時有遇過在-git-clone-step時非常之那麼久超過1分鐘以上">Oops 在跑CI/CD時，有遇過在 git clone step時非常之那麼久(超過1分鐘以上)！</h3>
<hr>
<p>先打開gitea進入此專案主頁
<img src="https://ithelp.ithome.com.tw/upload/images/20200914/20115289P0MytLLZ3c.png" alt="https://ithelp.ithome.com.tw/upload/images/20200914/20115289P0MytLLZ3c.png"></p>
<p>請大家注意到此專案的Size！</p>
<p>再來請點開圖片下方藍色的bar</p>
<p><img src="https://ithelp.ithome.com.tw/upload/images/20200914/20115289ITc2oslyth.png" alt="https://ithelp.ithome.com.tw/upload/images/20200914/20115289ITc2oslyth.png"></p>
<p>這是gitea v1.12.0 以後才有的功能
<a href="https://github.com/go-gitea/gitea/pull/8037">Language statistics bar for repositories</a></p>
<p>所以可以判定這是個golang為主的專案</p>
<p>然後就可以找看看是不是有人把編譯後的執行檔commit上來了！(99%都是這個原因)</p>
<h3 id="oops-下個commit把執行檔移除卻size還是沒變">Oops 下個commit把執行檔移除卻Size還是沒變？</h3>
<hr>
<p>因為檔案會存在git object內，所以如果可以的話，建議把此專案砍掉重建
這裡幫大家整理專案砍掉重建的SOP流程</p>
<ol>
<li>先通知專案擁有者們</li>
<li>預告動作時間</li>
<li>備份分支</li>
<li>開始刪除專案</li>
<li>請大家把重建專案clone下來，把備份的檔案搬遷到剛clone的專案內，並推上去新專案上</li>
<li>請大家檢查是否有遺漏檔案</li>
</ol>
<h3 id="如果忽視它呢">如果忽視它呢？</h3>
<p>如果持續忽視這個事情的話，過沒多久你的專案的size就會一直成長
再跑CI/CD時，會越來越慢，因為專案的size越來越肥</p>
<h3 id="沒事可以來抓抓看">沒事可以來抓抓看</h3>
<hr>
<p>那麼要怎麼找出這些可能有把執行檔commit上gitea的專案呢？
首先要有<code>管理者帳號</code> -&gt; 點選右上角<code>網站管理</code>-&gt;點選<code>儲存庫管理</code> -&gt; 點開排序 -&gt; 選擇 <code>Largest Size</code></p>
<p><img src="https://ithelp.ithome.com.tw/upload/images/20200914/20115289UGgsy8pcXv.png" alt="https://ithelp.ithome.com.tw/upload/images/20200914/20115289UGgsy8pcXv.png"></p>
<p>再來就可以透過上述的流程，來抓抓看
是不是又有人，忘記寫<code>.gitignore</code>，把執行檔commit到git上囉</p>

</div>


  </main>

  <footer>
  <div>
    &copy; Yu-Lin Tsai 2020

    

    
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  

  
</body>
</html>
